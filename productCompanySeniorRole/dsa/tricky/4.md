Locked âœ…
Proceeding with **Topic 4** in the **same colorful `.md` style**, **strict DSA format**, **senior-backend level**.

---

## ğŸ“„ **File name:** `java-equals-hashcode-dsa.md`

# ğŸ§  **DSA Questions â€“ `equals()` & `hashCode()` (Java)**

*(Senior Backend | Barclays / Enterprise Java)*

> âš ï¸ This topic causes **real production bugs**.
> Interviewers use it to **separate seniors from average devs**.

---

## ğŸ¯ DSA 1 â€” `equals()` without `hashCode()`

```java
class User {
    int id;
    User(int id) { this.id = id; }
    public boolean equals(Object o) {
        return ((User)o).id == this.id;
    }
}

Set<User> set = new HashSet<>();
set.add(new User(1));
System.out.println(set.contains(new User(1)));
```

### âœ… Answer

```
false
```

### ğŸ§  Explanation

`HashSet` uses `hashCode()` first.
Without overriding it, equal objects go to different buckets.

---

## ğŸ¯ DSA 2 â€” `hashCode()` without `equals()`

```java
class User {
    int id;
    public int hashCode() { return id; }
}

User u1 = new User();
User u2 = new User();
System.out.println(u1.equals(u2));
```

### âœ… Answer

```
false
```

### ğŸ§  Explanation

Default `equals()` compares **references**, not state.

---

## ğŸ¯ DSA 3 â€” Mutable Key Disaster

```java
class User {
    int id;
    User(int id) { this.id = id; }
    public int hashCode() { return id; }
    public boolean equals(Object o) {
        return ((User)o).id == this.id;
    }
}

Map<User, String> map = new HashMap<>();
User u = new User(1);
map.put(u, "Admin");
u.id = 2;
System.out.println(map.get(u));
```

### âœ… Answer

```
null
```

### ğŸ§  Explanation

Changing fields used in `hashCode()` breaks bucket mapping.

---

## ğŸ¯ DSA 4 â€” Symmetry Violation

```java
class A {
    int x;
    public boolean equals(Object o) {
        return o instanceof A && ((A)o).x == x;
    }
}

class B extends A { }

A a = new A();
B b = new B();
System.out.println(a.equals(b));
System.out.println(b.equals(a));
```

### âœ… Answer

```
true
false
```

### ğŸ§  Explanation

`equals()` symmetry rule is violated.

---

## ğŸ¯ DSA 5 â€” Transitivity Trap

```java
class Point {
    int x, y;
    public boolean equals(Object o) {
        Point p = (Point)o;
        return p.x == x;
    }
}

Point p1 = new Point();
Point p2 = new Point();
Point p3 = new Point();
System.out.println(p1.equals(p2) && p2.equals(p3) && p1.equals(p3));
```

### âœ… Answer

```
false
```

### ğŸ§  Explanation

Partial field comparison breaks transitivity.

---

## ğŸ¯ DSA 6 â€” `instanceof` vs `getClass()`

```java
class A {
    public boolean equals(Object o) {
        return o instanceof A;
    }
}
class B extends A {}

System.out.println(new A().equals(new B()));
System.out.println(new B().equals(new A()));
```

### âœ… Answer

```
true
true
```

### ğŸ§  Explanation

`instanceof` allows cross-class equality.

---

## ğŸ¯ DSA 7 â€” `getClass()` Strict Equality

```java
class A {
    public boolean equals(Object o) {
        return o != null && o.getClass() == getClass();
    }
}
class B extends A {}

System.out.println(new A().equals(new B()));
```

### âœ… Answer

```
false
```

### ğŸ§  Explanation

`getClass()` enforces **strict type equality**.

---

## ğŸ¯ DSA 8 â€” Hash Collision Handling

```java
class Key {
    public int hashCode() { return 1; }
}

Map<Key, String> map = new HashMap<>();
map.put(new Key(), "A");
map.put(new Key(), "B");
System.out.println(map.size());
```

### âœ… Answer

```
2
```

### ğŸ§  Explanation

Hash collisions are resolved via chaining/treeification.

---

## ğŸ¯ DSA 9 â€” `equals()` Null Safety

```java
class User {
    String name;
    public boolean equals(Object o) {
        return name.equals(((User)o).name);
    }
}

System.out.println(new User().equals(new User()));
```

### âœ… Answer

```
NullPointerException
```

### ğŸ§  Explanation

Calling `equals()` on a `null` field causes NPE.

---

## ğŸ¯ DSA 10 â€” Contract Consistency

```java
class User {
    int id;
    public boolean equals(Object o) {
        return ((User)o).id == id;
    }
    public int hashCode() {
        return 42;
    }
}

Set<User> set = new HashSet<>();
set.add(new User());
System.out.println(set.contains(new User()));
```

### âœ… Answer

```
true
```

### ğŸ§  Explanation

Same hash bucket + `equals()` returns true.

---

## ğŸ¯ DSA 11 â€” Performance Trap

```java
class Key {
    int id;
    public int hashCode() { return 1; }
}

Map<Key, Integer> map = new HashMap<>();
```

### âœ… Answer

```
O(n) lookup time
```

### ğŸ§  Explanation

All keys land in the same bucket.

---

## ğŸ¯ DSA 12 â€” Real Production Smell

```java
class User {
    int id;
    String role;
    public int hashCode() { return id; }
}
```

### âœ… Answer

```
Bug-prone design
```

### ğŸ§  Explanation

`equals()` missing â†’ contract violation.

---

## ğŸŒŸ Why this topic is **non-negotiable**

* Causes **ghost bugs** in HashMap / HashSet
* Breaks caching layers
* Interviewers use this to judge **production maturity**

---

### â–¶ï¸ Next step

Reply with **`5`** to continue:

## ğŸ”¥ **Strings & String Pool (Memory + Performance Traps)**

Same colorful `.md`, same strict DSA interview format.
