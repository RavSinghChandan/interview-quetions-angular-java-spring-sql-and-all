Excellent. Now we move to the step that transforms a **list of classes** into an actual **system design**:

> **Relationships**

Most candidates can find entities.
Few can connect them correctly.
Senior engineers excel here.

Study carefully ‚Äî interviewers watch this closely.

---

# STEP 5 ‚Äî RELATIONSHIPS (SYSTEM STRUCTURE DESIGN)

Entities alone are not a design.

Relationships turn entities into a system.

Most LLD interviews are decided here.

---

# 1Ô∏è‚É£ WHAT IS A RELATIONSHIP?

A relationship defines:

How two objects interact.

Example:

Order ‚Üí Customer  
Order ‚Üí Payment  

Without relationships, classes are isolated.

---

# 2Ô∏è‚É£ WHY INTERVIEWERS CARE ABOUT RELATIONSHIPS

They reveal whether you understand:

- system architecture
- ownership
- responsibility boundaries
- dependency structure

Wrong relationships = poor design thinking.

---

# 3Ô∏è‚É£ THE 5 CORE RELATIONSHIP TYPES

You must know these cold.

---

## 1. ASSOCIATION (Uses Relationship)

Meaning:
Object uses another.

Example:
Order uses PaymentService.

Code idea:
Order has reference to PaymentService.

Loose connection.

---

## 2. COMPOSITION (Strong Ownership)

Meaning:
Child cannot exist without parent.

Example:
Order ‚Üí OrderItems

If Order deleted ‚Üí Items deleted.

Rule:
Lifecycle tied.

Strong relationship.

---

## 3. AGGREGATION (Weak Ownership)

Meaning:
Child can exist independently.

Example:
Team ‚Üí Players

Player exists even if team removed.

Loose ownership.

---

## 4. DEPENDENCY

Temporary usage.

Example:
Method parameter.

OrderService.process(Payment p)

Object not stored.

---

## 5. INHERITANCE (IS-A)

Meaning:
Specialization.

Dog is Animal.

Use rarely.

---

# 4Ô∏è‚É£ INTERVIEW TRAP

Most candidates misuse inheritance.

Golden rule:

Use inheritance ONLY when:
true IS-A relationship exists.

Otherwise use composition.

---

# 5Ô∏è‚É£ RELATIONSHIP STRENGTH ORDER

Strongest ‚Üí Weakest

Composition ‚Üí Aggregation ‚Üí Association ‚Üí Dependency

Senior candidates choose weakest possible relationship.

Why?
Weak relationships = flexible systems.

---

# 6Ô∏è‚É£ OWNERSHIP THINKING

Ask:

Who owns this object?

Ownership determines relationship type.

Example:
Cart owns CartItems ‚Üí composition

User has Address ‚Üí aggregation

---

# 7Ô∏è‚É£ LIFECYCLE RULE

If parent dies, should child die?

Yes ‚Üí composition  
No ‚Üí aggregation  

---

# 8Ô∏è‚É£ RELATIONSHIP DIRECTION

Direction matters.

Example:

Order ‚Üí PaymentService  
NOT  
PaymentService ‚Üí Order

Because:
Order uses payment.

---

# 9Ô∏è‚É£ BIDIRECTIONAL RELATIONSHIP WARNING

Avoid unless needed.

Bad:
Order ‚Üî Customer

This increases coupling.

Prefer one direction.

---

# üîü RELATIONSHIP DESIGN STRATEGY

Always design relationships after entities.

Sequence:

Entities ‚Üí Responsibilities ‚Üí Relationships

Never reverse.

---

# 1Ô∏è‚É£1Ô∏è‚É£ RELATIONSHIP VALIDATION TEST

For each relationship ask:

Why does this exist?

If no clear reason ‚Üí remove it.

---

# 1Ô∏è‚É£2Ô∏è‚É£ COUPLING IMPACT

Strong relationships increase coupling.

Goal:
Minimize coupling.

Loose coupling allows:

- independent change
- easier testing
- flexible architecture

---

# 1Ô∏è‚É£3Ô∏è‚É£ DEPENDENCY INJECTION RELATIONSHIP

Instead of creating dependency:

service = new Service()

Inject dependency:

constructor(Service service)

Why?
Reduces coupling.

---

# 1Ô∏è‚É£4Ô∏è‚É£ COMMON RELATIONSHIP MISTAKES

Avoid:

- everything inherits from base class
- bidirectional references everywhere
- unnecessary composition
- circular dependencies

---

# 1Ô∏è‚É£5Ô∏è‚É£ CIRCULAR DEPENDENCY (INSTANT RED FLAG)

Bad:

A depends on B  
B depends on A  

This makes system fragile.

Senior engineers avoid this.

---

# 1Ô∏è‚É£6Ô∏è‚É£ RELATIONSHIP VISUALIZATION TECHNIQUE

During interview:

Draw arrows.

Example:

User ‚Üí Order ‚Üí Payment

This shows structured thinking.

---

# 1Ô∏è‚É£7Ô∏è‚É£ REAL INTERVIEW EXAMPLE

Design Parking Lot

Relationships:

ParkingLot ‚Üí Spots (composition)

Spot ‚Üí Vehicle (association)

Ticket ‚Üí Spot (association)

PaymentService ‚Üí Ticket (dependency)

---

# 1Ô∏è‚É£8Ô∏è‚É£ RELATIONSHIP SIMPLIFICATION RULE

Simpler relationships are better.

Avoid complex graphs unless needed.

---

# 1Ô∏è‚É£9Ô∏è‚É£ RELATIONSHIP CHECKLIST

Before finalizing design confirm:

‚úî Ownership correct  
‚úî No unnecessary inheritance  
‚úî No circular dependency  
‚úî Weakest relationship used  
‚úî Minimal coupling  

---

# 2Ô∏è‚É£0Ô∏è‚É£ SENIOR INSIGHT

Junior engineers connect classes.

Senior engineers design relationships intentionally.

---

# üèÜ INTERVIEW POWER LINE

Say this:

"I‚Äôm choosing aggregation here instead of composition because this object should exist independently."

This signals deep understanding.

---

# üéØ PRACTICE DRILL

Pick system:
Library

Identify relationships between:

Book  
Member  
Loan  
Fine  

Do this daily.

---

# FINAL PRINCIPLE

Classes define structure.
Relationships define architecture.
```

---

‚úÖ **Next file:** `STEP 6 ‚Äî interfaces.md`
(This is where your design becomes extensible and senior-level.)

Reply **6** when ready.
